1000 REM CASTLE DUNGEON
1010 REM EDUCATIONAL TEMPLATE FOR ATARI BASIC (1979) GAMES BY FILIPPO SANTELLOCCO
1020 REM PUT PROGRAM CORE IN FIRST LINES, THEY RUN FASTER
1030 GOSUB 5000:REM CHARACTER SET REDEFINITION
1040 GOSUB 5210:REM TITLE SCREEN
1050 PX=10:PY=5:REM PLAYER'S STARTING POSITION
1060 REM MAIN LOOP
1070 J=STICK(0):REM READ JOYSTICK
1080 IF J<>15 THEN COLOR 32:PLOT PX,PY:REM JOYSTICK MOVED & SPACE CHARACTER PRINTED
1090 IF J=7 THEN PX=PX+1:REM JOYSTICK RIGHT
1100 IF J=11 THEN PX=PX-1:REM JOYSTICK LEFT
1110 IF J=13 THEN PY=PY+1:REM JOYSTICK DOWN
1120 IF J=14 THEN PY=PY-1:REM JOYSTICK UP
1130 IF PX<0 THEN PX=0:REM LEFT BORDER CHECK
1140 IF PX>19 THEN PX=19:REM RIGHT BORDER CHECK
1150 IF PY<0 THEN PY=0:REM UP BORDER CHECK
1160 IF PY>11 THEN PY=11:REM DOWN BORDER CHECK
1170 COLOR 33:PLOT PX,PY:REM IN GRAPHICS MODE 2 COLOR IS CHARACTER'S NUMBER
1180 POKE 77,0:REM SCREENSAVER DISABLE
1190 GOTO 1070
5000 REM CHARACTER SET REDEFINITION
5010 NMEMTOP=PEEK(106)-4:POKE 106,NMEMTOP:REM RESERVES 1KB MEMORY
5020 CHRAM=NMEMTOP*256
5030 GRAPHICS 2+16:REM 20X12 CHARACTERS GRAPHIC MODE
5040 SETCOLOR 0,0,10:REM UPPER CASE & NUMBERS - GREY
5050 SETCOLOR 1,3,4:REM LOWER CASE - RED
5060 SETCOLOR 2,14,14:REM INVERSE UPPER CASE & NUMBERS - YELLOW
5070 SETCOLOR 3,1,2:REM INVERSE LOWER CASE - BROWN
5080 SETCOLOR 4,0,0:REM BACKGROUND - BLACK
5090 POSITION 4,4
5100 PRINT #6;"PLEASE WAIT"
5110 REM LOADS 128 CHARACTERS DATA (128*8 = 1024 BYTES)
5120 RESTORE 10010
5130 FOR T=0 TO 1023
5140 READ N:POKE CHRAM+T,N
5150 POSITION 8,5:PRINT #6;1024-T;" ":REM DISPLAY COUNTDOWN
5160 NEXT T
5170 PRINT #6;CHR$(125):REM CLEARS SCREEN
5180 POKE 756,NMEMTOP:REM CHANGE CHARACTER SET POINTER
5190 RETURN
5200 REM TITLE SCREEN
5210 POSITION 2,2
5220 FOR T=1 TO 16:PRINT #6;CHR$(251);:NEXT T
5230 POSITION 2,3
5240 PRINT #6;CHR$(251);"CASTLE DUNGEON";CHR$(251);
5250 POSITION 2,4
5260 FOR T=1 TO 16:PRINT #6;CHR$(251);:NEXT T
5270 POSITION 7,6
5280 PRINT #6;CHR$(33);CHR$(166);CHR$(190);CHR$(191);CHR$(28);
5290 REM CHR$(33) = PLAYER - GREY
5300 REM CHR$(28) = ENEMY - RED
5310 REM CHR$(166) = COIN - YELLOW
5320 REM CHR$(190) = SWORD - YELLOW
5330 REM CHR$(191) = KEY - YELLOW
5340 REM CHR$(251) = WALL - BROWN
5350 REM CHR$(254) = DOOR - BROWN
5360 REM CHR$(34) = ATARI LOGO - RED
5370 POSITION 5,9
5380 PRINT #6;"PRESS FIRE"
5390 IF STRIG(0)<>0 THEN 5390:REM 0 = FIRE PRESSED
5400 PRINT #6;CHR$(125):REM SCREEN CLEAR
5410 RETURN
10000 REM DATA NEW CHARACTER SET
10010 DATA 0,0,0,0,0,0,0,0
10020 DATA 24,24,60,90,90,36,36,102
10030 DATA 0,0,28,28,28,62,107,73
10040 DATA 51,204,51,204,51,204,51,204
10050 DATA 0,0,0,0,0,0,0,0
10060 DATA 0,102,108,24,48,102,70,0
10070 DATA 0,0,60,126,126,60,0,0
10080 DATA 0,24,24,24,0,0,0,0
10090 DATA 0,14,28,24,24,28,14,0
10100 DATA 0,112,56,24,24,56,112,0
10110 DATA 0,102,60,255,60,102,0,0
10120 DATA 0,24,24,126,24,24,0,0
10130 DATA 0,0,0,0,0,24,24,48
10140 DATA 0,0,0,126,0,0,0,0
10150 DATA 0,0,0,0,0,24,24,0
10160 DATA 0,6,12,24,48,96,64,0
10170 DATA 56,108,206,206,206,108,56,0
10180 DATA 24,56,120,24,24,24,24,0
10190 DATA 60,102,54,12,48,102,124,0
10200 DATA 124,24,28,54,6,12,48,0
10210 DATA 24,48,48,108,110,124,12,0
10220 DATA 60,48,120,108,12,24,48,0
10230 DATA 12,24,48,108,102,110,60,0
10240 DATA 126,206,28,24,56,48,48,0
10250 DATA 60,102,62,124,198,198,124,0
10260 DATA 60,118,102,54,12,24,48,0
10270 DATA 0,0,24,24,0,24,24,0
10280 DATA 0,0,24,24,0,24,24,48
10290 DATA 90,60,126,153,153,36,36,102
10300 DATA 0,0,126,0,0,126,0,0
10310 DATA 0,8,24,24,24,60,24,0
10320 DATA 0,8,24,8,28,34,28,0
10330 DATA 0,0,0,0,0,0,0,0
10340 DATA 12,28,54,54,126,102,195,0
10350 DATA 252,102,124,102,99,115,206,0
10360 DATA 60,102,198,192,198,108,56,0
10370 DATA 216,108,102,102,102,108,216,0
10380 DATA 220,102,96,120,96,108,248,0
10390 DATA 220,102,96,120,96,96,192,0
10400 DATA 60,102,192,222,204,108,54,0
10410 DATA 230,108,108,124,108,108,204,0
10420 DATA 56,24,24,24,24,24,48,0
10430 DATA 14,12,12,108,204,216,112,0
10440 DATA 230,108,120,120,108,109,198,0
10450 DATA 112,48,48,48,96,118,220,0
10460 DATA 195,103,119,107,107,99,195,0
10470 DATA 198,102,118,126,110,102,194,0
10480 DATA 56,108,198,198,198,108,56,0
10490 DATA 220,118,102,118,108,96,192,0
10500 DATA 56,108,198,198,218,109,54,0
10510 DATA 220,102,102,108,120,109,198,0
10520 DATA 60,102,48,24,108,204,120,0
10530 DATA 127,204,108,12,24,24,24,0
10540 DATA 230,54,54,102,108,108,56,0
10550 DATA 99,99,54,54,60,56,16,0
10560 DATA 134,195,219,219,219,254,204,0
10570 DATA 198,108,56,24,56,109,198,0
10580 DATA 198,108,56,24,24,48,48,0
10590 DATA 126,204,24,48,96,246,204,0
10600 DATA 0,221,221,221,0,187,187,187
10610 DATA 0,64,96,48,24,12,6,0
10620 DATA 0,120,24,24,24,24,120,0
10630 DATA 0,0,0,126,126,0,0,0
10640 DATA 0,0,0,0,0,0,255,0
10650 DATA 0,0,0,0,0,0,0,0
10660 DATA 0,0,0,0,0,0,0,0
10670 DATA 0,0,0,0,0,0,0,0
10680 DATA 0,0,0,0,0,0,0,0
10690 DATA 0,0,0,0,0,0,0,0
10700 DATA 0,0,0,0,0,0,0,0
10710 DATA 0,0,0,0,0,0,0,0
10720 DATA 0,0,0,0,0,0,0,0
10730 DATA 0,0,0,0,0,0,0,0
10740 DATA 0,0,0,0,0,0,0,0
10750 DATA 0,0,0,0,0,0,0,0
10760 DATA 0,0,0,0,0,0,0,0
10770 DATA 0,0,0,0,0,0,0,0
10780 DATA 0,0,0,0,0,0,0,0
10790 DATA 0,0,0,0,0,0,0,0
10800 DATA 0,0,0,0,0,0,0,0
10810 DATA 0,0,0,0,0,0,0,0
10820 DATA 0,0,0,0,0,0,0,0
10830 DATA 0,0,0,0,0,0,0,0
10840 DATA 0,0,0,0,0,0,0,0
10850 DATA 0,0,0,0,0,0,0,0
10860 DATA 0,0,0,0,0,0,0,0
10870 DATA 0,0,0,0,0,0,0,0
10880 DATA 0,0,0,0,0,0,0,0
10890 DATA 0,0,0,0,0,0,0,0
10900 DATA 0,0,0,0,0,0,0,0
10910 DATA 0,0,0,0,0,0,0,0
10920 DATA 0,0,0,0,0,0,0,0
10930 DATA 0,0,0,0,0,0,0,0
10940 DATA 0,0,0,0,0,0,0,0
10950 DATA 0,0,0,0,0,0,0,0
10960 DATA 0,0,0,0,0,0,0,0
10970 DATA 0,0,0,0,0,0,0,0
10980 DATA 0,0,60,108,108,108,54,0
10990 DATA 0,96,48,60,54,54,108,0
11000 DATA 0,0,60,96,96,102,60,0
11010 DATA 0,28,12,60,108,108,54,0
11020 DATA 0,0,60,102,126,96,62,0
11030 DATA 12,24,24,126,24,24,48,0
11040 DATA 0,0,118,204,204,124,12,248
11050 DATA 0,192,96,124,102,102,108,0
11060 DATA 0,24,0,56,24,24,24,0
11070 DATA 0,24,0,56,24,24,24,112
11080 DATA 0,192,96,108,120,108,102,0
11090 DATA 0,56,24,24,24,24,24,0
11100 DATA 0,0,236,219,219,219,198,0
11110 DATA 0,0,124,102,102,102,108,0
11120 DATA 0,0,124,198,198,108,56,0
11130 DATA 0,0,220,102,102,124,96,96
11140 DATA 0,0,118,204,204,124,12,6
11150 DATA 0,0,220,102,102,96,96,0
11160 DATA 0,0,124,192,120,12,120,0
11170 DATA 0,48,252,48,48,54,28,0
11180 DATA 0,0,204,204,204,204,118,0
11190 DATA 0,0,236,102,102,108,56,0
11200 DATA 0,0,198,219,219,219,110,0
11210 DATA 0,0,204,56,48,120,206,0
11220 DATA 0,0,102,54,60,28,216,112
11230 DATA 0,0,124,216,48,102,252,0
11240 DATA 0,24,60,126,126,24,60,0
11250 DATA 24,24,24,24,24,24,24,24
11260 DATA 0,126,120,124,110,102,6,0
11270 DATA 8,24,56,120,56,24,8,0
11280 DATA 16,24,28,30,28,24,16,0
