1000 REM CASTLE DUNGEON (2019)
1010 REM EDUCATIONAL TEMPLATE FOR ATARI BASIC (1979) GAMES BY FILIPPO SANTELLOCCO
1020 REM PUT PROGRAM CORE IN FIRST LINES, IT RUNS FASTER
1030 GOSUB 5000:REM CHARACTER SET REDEFINITION
1040 GOSUB 5210:REM TITLE SCREEN
1050 XPOS=10:YPOS=5:REM PLAYER'S STARTING POSITION
1060 XPOSOLD=10:YPOSOLD=5
1070 XLIMIT=19:YLIMIT=11
1080 XMOV=0:YMOV=1
1090 REM MAIN LOOP:IN GRAPHICS MODE 2 COLOR IS CHARACTER'S NUMBER
1100 IF XMOV OR YMOV THEN COLOR 32:PLOT XPOSOLD,YPOSOLD:COLOR 33:PLOT XPOS,YPOS:POKE 77,0:REM SCREENSAVER DISABLE
1110 XPOSOLD=XPOS:YPOSOLD=YPOS
1120 J=STICK(0):REM READ JOYSTICK
1130 XMOV=(J=7)*(XPOS<XLIMIT)-(J=11)*(XPOS>0)
1140 YMOV=(J=13)*(YPOS<YLIMIT)-(J=14)*(YPOS>0)
1150 XPOS=XPOS+XMOV:YPOS=YPOS+YMOV
1160 GOTO 1100
5000 REM CHARACTER SET REDEFINITION
5010 NMEMTOP=PEEK(106)-4:POKE 106,NMEMTOP:REM RESERVES 1KB MEMORY
5020 CHRAM=NMEMTOP*256
5030 GRAPHICS 2+16:REM 20X12 CHARACTERS GRAPHIC MODE
5040 SETCOLOR 0,0,10:REM UPPER CASE & NUMBERS - GREY
5050 SETCOLOR 1,3,4:REM LOWER CASE - RED
5060 SETCOLOR 2,14,14:REM INVERSE UPPER CASE & NUMBERS - YELLOW
5070 SETCOLOR 3,1,2:REM INVERSE LOWER CASE - BROWN
5080 SETCOLOR 4,0,0:REM BACKGROUND - BLACK
5090 POSITION 4,4
5100 PRINT #6;"PLEASE WAIT"
5110 REM LOADS 128 CHARACTERS DATA (128*8 = 1024 BYTES)
5120 RESTORE 5430
5130 FOR T=0 TO 1023
5140   READ N:POKE CHRAM+T,N
5150   POSITION 8,5:PRINT #6;1024-T;" ":REM DISPLAY COUNTDOWN
5160 NEXT T
5170 PRINT #6;CHR$(125):REM CLEARS SCREEN
5180 POKE 756,NMEMTOP:REM CHANGE CHARACTER SET POINTER
5190 RETURN 
5200 REM TITLE SCREEN
5210 POSITION 2,2
5220 FOR T=1 TO 16:PRINT #6;CHR$(251);:NEXT T
5230 POSITION 2,3
5240 PRINT #6;CHR$(251);"CASTLE DUNGEON";CHR$(251);
5250 POSITION 2,4
5260 FOR T=1 TO 16:PRINT #6;CHR$(251);:NEXT T
5270 POSITION 7,6
5280 PRINT #6;CHR$(33);CHR$(166);CHR$(190);CHR$(191);CHR$(28);
5290 REM CHR$(33) = PLAYER - GREY
5300 REM CHR$(28) = ENEMY - RED
5310 REM CHR$(166) = COIN - YELLOW
5320 REM CHR$(190) = SWORD - YELLOW
5330 REM CHR$(191) = KEY - YELLOW
5340 REM CHR$(251) = WALL - BROWN
5350 REM CHR$(254) = DOOR - BROWN
5360 REM CHR$(34) = ATARI LOGO - RED
5370 POSITION 5,9
5380 PRINT #6;"PRESS FIRE"
5390 IF STRIG(0)<>0 THEN 5390:REM 0 = FIRE PRESSED
5400 PRINT #6;CHR$(125):REM SCREEN CLEAR
5410 RETURN 
5420 REM DATA NEW CHARACTER SET
5430 DATA 0,0,0,0,0,0,0,0
5440 DATA 24,24,60,90,90,36,36,102
5450 DATA 0,0,28,28,28,62,107,73
5460 DATA 51,204,51,204,51,204,51,204
5470 DATA 0,0,0,0,0,0,0,0
5480 DATA 0,102,108,24,48,102,70,0
5490 DATA 0,0,60,126,126,60,0,0
5500 DATA 0,24,24,24,0,0,0,0
5510 DATA 0,14,28,24,24,28,14,0
5520 DATA 0,112,56,24,24,56,112,0
5530 DATA 0,102,60,255,60,102,0,0
5540 DATA 0,24,24,126,24,24,0,0
5550 DATA 0,0,0,0,0,24,24,48
5560 DATA 0,0,0,126,0,0,0,0
5570 DATA 0,0,0,0,0,24,24,0
5580 DATA 0,6,12,24,48,96,64,0
5590 DATA 56,108,206,206,206,108,56,0
5600 DATA 24,56,120,24,24,24,24,0
5610 DATA 60,102,54,12,48,102,124,0
5620 DATA 124,24,28,54,6,12,48,0
5630 DATA 24,48,48,108,110,124,12,0
5640 DATA 60,48,120,108,12,24,48,0
5650 DATA 12,24,48,108,102,110,60,0
5660 DATA 126,206,28,24,56,48,48,0
5670 DATA 60,102,62,124,198,198,124,0
5680 DATA 60,118,102,54,12,24,48,0
5690 DATA 0,0,24,24,0,24,24,0
5700 DATA 0,0,24,24,0,24,24,48
5710 DATA 90,60,126,153,153,36,36,102
5720 DATA 0,0,126,0,0,126,0,0
5730 DATA 0,8,24,24,24,60,24,0
5740 DATA 0,8,24,8,28,34,28,0
5750 DATA 0,0,0,0,0,0,0,0
5760 DATA 12,28,54,54,126,102,195,0
5770 DATA 252,102,124,102,99,115,206,0
5780 DATA 60,102,198,192,198,108,56,0
5790 DATA 216,108,102,102,102,108,216,0
5800 DATA 220,102,96,120,96,108,248,0
5810 DATA 220,102,96,120,96,96,192,0
5820 DATA 60,102,192,222,204,108,54,0
5830 DATA 230,108,108,124,108,108,204,0
5840 DATA 56,24,24,24,24,24,48,0
5850 DATA 14,12,12,108,204,216,112,0
5860 DATA 230,108,120,120,108,109,198,0
5870 DATA 112,48,48,48,96,118,220,0
5880 DATA 195,103,119,107,107,99,195,0
5890 DATA 198,102,118,126,110,102,194,0
5900 DATA 56,108,198,198,198,108,56,0
5910 DATA 220,118,102,118,108,96,192,0
5920 DATA 56,108,198,198,218,109,54,0
5930 DATA 220,102,102,108,120,109,198,0
5940 DATA 60,102,48,24,108,204,120,0
5950 DATA 127,204,108,12,24,24,24,0
5960 DATA 230,54,54,102,108,108,56,0
5970 DATA 99,99,54,54,60,56,16,0
5980 DATA 134,195,219,219,219,254,204,0
5990 DATA 198,108,56,24,56,109,198,0
6000 DATA 198,108,56,24,24,48,48,0
6010 DATA 126,204,24,48,96,246,204,0
6020 DATA 0,221,221,221,0,187,187,187
6030 DATA 0,64,96,48,24,12,6,0
6040 DATA 0,120,24,24,24,24,120,0
6050 DATA 0,0,0,126,126,0,0,0
6060 DATA 0,0,0,0,0,0,255,0
6070 DATA 0,0,0,0,0,0,0,0
6080 DATA 0,0,0,0,0,0,0,0
6090 DATA 0,0,0,0,0,0,0,0
6100 DATA 0,0,0,0,0,0,0,0
6110 DATA 0,0,0,0,0,0,0,0
6120 DATA 0,0,0,0,0,0,0,0
6130 DATA 0,0,0,0,0,0,0,0
6140 DATA 0,0,0,0,0,0,0,0
6150 DATA 0,0,0,0,0,0,0,0
6160 DATA 0,0,0,0,0,0,0,0
6170 DATA 0,0,0,0,0,0,0,0
6180 DATA 0,0,0,0,0,0,0,0
6190 DATA 0,0,0,0,0,0,0,0
6200 DATA 0,0,0,0,0,0,0,0
6210 DATA 0,0,0,0,0,0,0,0
6220 DATA 0,0,0,0,0,0,0,0
6230 DATA 0,0,0,0,0,0,0,0
6240 DATA 0,0,0,0,0,0,0,0
6250 DATA 0,0,0,0,0,0,0,0
6260 DATA 0,0,0,0,0,0,0,0
6270 DATA 0,0,0,0,0,0,0,0
6280 DATA 0,0,0,0,0,0,0,0
6290 DATA 0,0,0,0,0,0,0,0
6300 DATA 0,0,0,0,0,0,0,0
6310 DATA 0,0,0,0,0,0,0,0
6320 DATA 0,0,0,0,0,0,0,0
6330 DATA 0,0,0,0,0,0,0,0
6340 DATA 0,0,0,0,0,0,0,0
6350 DATA 0,0,0,0,0,0,0,0
6360 DATA 0,0,0,0,0,0,0,0
6370 DATA 0,0,0,0,0,0,0,0
6380 DATA 0,0,0,0,0,0,0,0
6390 DATA 0,0,0,0,0,0,0,0
6400 DATA 0,0,60,108,108,108,54,0
6410 DATA 0,96,48,60,54,54,108,0
6420 DATA 0,0,60,96,96,102,60,0
6430 DATA 0,28,12,60,108,108,54,0
6440 DATA 0,0,60,102,126,96,62,0
6450 DATA 12,24,24,126,24,24,48,0
6460 DATA 0,0,118,204,204,124,12,248
6470 DATA 0,192,96,124,102,102,108,0
6480 DATA 0,24,0,56,24,24,24,0
6490 DATA 0,24,0,56,24,24,24,112
6500 DATA 0,192,96,108,120,108,102,0
6510 DATA 0,56,24,24,24,24,24,0
6520 DATA 0,0,236,219,219,219,198,0
6530 DATA 0,0,124,102,102,102,108,0
6540 DATA 0,0,124,198,198,108,56,0
6550 DATA 0,0,220,102,102,124,96,96
6560 DATA 0,0,118,204,204,124,12,6
6570 DATA 0,0,220,102,102,96,96,0
6580 DATA 0,0,124,192,120,12,120,0
6590 DATA 0,48,252,48,48,54,28,0
6600 DATA 0,0,204,204,204,204,118,0
6610 DATA 0,0,236,102,102,108,56,0
6620 DATA 0,0,198,219,219,219,110,0
6630 DATA 0,0,204,56,48,120,206,0
6640 DATA 0,0,102,54,60,28,216,112
6650 DATA 0,0,124,216,48,102,252,0
6660 DATA 0,24,60,126,126,24,60,0
6670 DATA 24,24,24,24,24,24,24,24
6680 DATA 0,126,120,124,110,102,6,0
6690 DATA 8,24,56,120,56,24,8,0
6700 DATA 16,24,28,30,28,24,16,0